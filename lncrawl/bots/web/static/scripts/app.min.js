function toggleFullScreen() {
	var n = window.document,
		t = n.documentElement,
		i = t.requestFullscreen || t.mozRequestFullScreen || t.webkitRequestFullScreen || t.msRequestFullscreen,
		r = n.exitFullscreen || n.mozCancelFullScreen || n.webkitExitFullscreen || n.msExitFullscreen;
	n.fullscreenElement || n.mozFullScreenElement || n.webkitFullscreenElement || n.msFullscreenElement ? r.call(n) : i.call(t)
}

function lockWindow() {
	$("html").css({
		"border-right": window.innerWidth < 768 ? "none" : "17px solid transparent"
	}).addClass("ovh");
	$("body").addClass("ovh")
}

function unlockWindow() {
	$("html").removeAttr("style").removeClass("ovh");
	$("html").removeClass("ovh")
}

function toggleBodyWrapper(n) {
	var t = $(".main-header")[0].getBoundingClientRect().bottom;

	$(".sidebar-wrapper, .navigation-bar").css({
		top: t <= 0 ? 0 : t
	});
	n ? $(".sidebar-wrapper").addClass("show") : $(".sidebar-wrapper").removeClass("show")
}

function toggleMobileNavMenu(n) {
	var t = $("body").hasClass("navigation");
	!t && n ? ($("body").addClass("navigation"), toggleBodyWrapper(!0), lockWindow()) : ($(
		"body").removeClass("navigation"),
		unlockWindow(),
		n && toggleBodyWrapper(!1))
}

function closeAllSidebars() {
	$("body").removeClass("navigation"
	);
	$(".sidebar-wrapper").removeClass("show");
	$("#chapter-article .sidebar").removeClass("show");
	unlockWindow()
}

function sort_chapters(n) {
	var t = $(".chapter-list li");

	t.sort(function (t, i) {
		var r = parseInt($(t).data("orderno")), u = parseInt($(i).data("orderno")); if (n == "asc") {
			if (r > u) return 1; if (r < u) return -1
		}

		else if (n == "desc") {
			if (r < u) return 1; if (r > u) return -1
		}

		return 0
	});
	t.detach().appendTo(".chapter-list")
}

function userInteractShow(n) {
	var t = (new Date).getTime(),
		i = localStorage.getItem(n);
	if (!i) return localStorage.setItem(n, t),
		!0;
	var r = new Date(Number(i)).getTime(),
		u = t - r,
		f = Math.round(u / 6e4);
	return f >= 60 ? (localStorage.setItem(n, t), !0) : !1
}

function stickyBar(n, t, i, r) {
	var o = !1,
		u = !1,
		f = !1,
		e = $(n),
		s = $(t),
		h;

	if (e.length != 0) {
		h = function () {
			var o = s[0].getBoundingClientRect(),
				n = e[0].getBoundingClientRect(),
				h = e.outerHeight(!0),
				t = i + parseInt($("body").css("marginTop"), 10);

			!u && (n.top < t && !f || n.top > t && f) && (e.css({
				position: "fixed", top: t + "px", bottom: "", width: n.width
			}), u = !0, f = !1, r && s.css("padding-top", h));

			o.top > t - (r ? h : 0) && u && (e.css({
				position: "", top: "", bottom: "", width: "auto"
			}), u = !1, f = !1, r && s.css("padding-top", 0));

			u && !f && n.bottom > o.bottom && (e.css({
				position: "absolute", top: "auto", bottom: "0px"
			}), f = !0, u = !1)
		}

			;

		$(window).on("scroll", function () {
			o = !0
		});

		setInterval(function () {
			o && (h(), o = !1)
		}

			, 50)
	}
}

function showAlert(n, t, i, r, u, f) {
	f === !0 && $("#alertbox_error .alert-wrapper .closebtn").css("display", "none");
	i || (i = "280px");
	r || (r = "200px");
	u || (u = "16px");

	$("#alertbox_error .alert-wrapper").css({
		width: i, height: r
	});

	$("#alertbox_error .alert-wrapper .alert-body .msg").css({
		fontSize: u
	});
	$("#alertbox_error .title").html(n);
	$("#alertbox_error .msg").html(t);
	$("#alertbox_error").addClass("show");
	$("html").css("overflow", "hidden")
}

function showQuestion(n, t, i, r, u, f, e, o) {
	r || (r = function () { });
	u || (u = "280px");
	f || (f = "200px");
	e || (e = "16px");
	o === !0 && $("#alertbox_question .alert-wrapper .closebtn").css("display", "none");

	$("#alertbox_question .alert-wrapper").css({
		width: u, height: f
	});

	$("#alertbox_question .alert-wrapper .alert-body .msg").css({
		fontSize: e
	});
	$("#alertbox_question .title").html(n);
	$("#alertbox_question .msg").html(t);
	$("#alertbox_question").addClass("show");

	$("#alertbox_question .apply").one("click", function () {
		$(".alertbox").removeClass("show"); $("html").removeAttr("style"); $("#alertbox_question .apply").addClass("isDisabled"); i()
	});

	$("#alertbox_question .closebtn").off().on("click", function () {
		$(".alertbox").removeClass("show"); $("html").removeAttr("style"); r()
	});
	$("html").css("overflow", "hidden")
}

function miniSpinner(n, t, i = "static") {
	var r = $(`<div class="loading-spin ${i}" role="status" ></div>`);
	t ? (n.addClass("isDisabled"), n.prepend(r)) : (r = n.find(".loading-spin"), r.remove(), n.removeClass("isDisabled"))
}

function setLoading(n, t) {
	t ? n.addClass("loading-spin") : n.removeClass("loading-spin")
}

function fn_showloginform() {
	var n = $('<div class="lnw-mod-wrap _loading"><div class="wrap-body"><a href="javascript:;" class="_close"><svg><use xlink:href="#i-times"><\/use><\/svg><\/a><div class="g_loading"><i><\/i><\/div><iframe id="loginIfr" src="/account/login" name="frameLG" id="frameLG" allowtransparentcy="true" width="100%" height="100%" scrolling="no" frameborder="no"><\/iframe><\/div><\/div>'),
		t;
	$("body").append(n);
	t = n.find("iframe");

	t.on("load", function () {
		n.removeClass("_loading")
	});

	setTimeout(function () {
		n.addClass("_show")
	}

		, 0)
}

function detectWebDrv() {
	window.webdrv = runBotDetection();

	window.webdrv && gtag("event", "selenium", {
		event_category: "browser", event_label: "webdriver", value: 1
	})
}

var localStorage = window.localStorage,
	gtag,
	runBotDetection,
	speechUtteranceChunker;
window.webdrv = !1;
window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;

gtag = gtag || function () { }

	;

$(document).ajaxSend(function (n, t, i) {
	if (i.type.toUpperCase() == "POST") {
		var r = $("input[name='__LNRequestVerifyToken']").val(); t.setRequestHeader("LNRequestVerifyToken", r)
	}
});

$.fn.isInViewport = function () {
	var n = $(this).offset().top,
		i = n + $(this).outerHeight(),
		t = $(window).scrollTop(),
		r = t + $(window).height();
	return i > t && n < r
}

	;

$.fn.preventDoubleClick = function () {
	$(this).on("click", function (n) {
		var t = $(this); t.data("clicked") ? (n.preventDefault(), n.stopPropagation()) : (t.addClass("isDisabled"), t.data("clicked", !0), window.setTimeout(function () {
			t.removeData("clicked"); t.removeClass("isDisabled")
		}

			, 1e3))
	});
	return this
}

	;

runBotDetection = function () {
	var t = ["__webdriver_evaluate",
		"__selenium_evaluate",
		"__webdriver_script_function",
		"__webdriver_script_func",
		"__webdriver_script_fn",
		"__fxdriver_evaluate",
		"__driver_unwrapped",
		"__webdriver_unwrapped",
		"__driver_evaluate",
		"__selenium_unwrapped",
		"__fxdriver_unwrapped",
	],
		i = ["_phantom",
			"__nightmare",
			"_selenium",
			"callPhantom",
			"callSelenium",
			"_Selenium_IDE_Recorder",
		],
		r,
		u,
		f,
		e,
		n;
	for (r in i) if (u = i[r], window[u]) return !0;
	for (f in t) if (e = t[f], window.document[e]) return !0;
	for (n in window.document) if (n.match(/\$[a-z]dc_/) && window.document[n].cache_) return !0;
	return window.external && window.external.toString() && window.external.toString().indexOf("Sequentum") != -1 ? !0 : window.document.documentElement.getAttribute("selenium") ? !0 : window.document.documentElement.getAttribute("webdriver") ? !0 : window.document.documentElement.getAttribute("driver") ? !0 : /HeadlessChrome/.test(navigator.userAgent) ? !0 : !navigator.languages || navigator.languages.length === 0 ? !0 : !1
}

	;
detectWebDrv();

speechUtteranceChunker = function (n, t, i) {
	var r,
		e,
		s,
		u,
		h;

	if (t = t || {}

		, e = t && t.offset !== undefined ? n.text.substring(t.offset) : n.text, n.voice && n.voice.voiceURI === "native") r = n,
			r.text = e,
			r.addEventListener("end", function () {
				speechUtteranceChunker.cancel && (speechUtteranceChunker.cancel = !1); i !== undefined && i()
			});

	else {
		var f = t && t.chunkLength || 160,
			c = new RegExp("^[\\s\\S]{" + Math.floor(f / 2) + "," + f + "}[.!?,]{1}|^[\\s\\S]{1," + f + "}$|^[\\s\\S]{1," + f + "} "),
			o = e.match(c);

		if (o[0] === undefined || o[0].length <= 2) {
			i !== undefined && i();
			return
		}

		s = o[0];
		r = new SpeechSynthesisUtterance(s);
		r.voice = n.voice;
		r.pitch = n.pitch;
		r.rate = n.rate;
		r.volume = n.volume;
		for (u in n) h = n.hasOwnProperty(u),
			h && u !== "text" && (r[u] = n[u]);

		r.addEventListener("end", function () {
			if (speechUtteranceChunker.cancel) {
				speechUtteranceChunker.cancel = !1; return
			}

			t.offset = t.offset || 0; t.offset += s.length - 1; speechUtteranceChunker(n, t, i)
		})
	}

	t.modifier && t.modifier(r);

	setTimeout(function () {
		speechSynthesis.speak(r)
	}

		, 0)
}

	;

$(document).ready(function () {
	$("#library-push-login").on("click", function (n) {
		n.preventDefault(); showAlert("Info", `<p>You need to log in before adding to the library.</p><p>${"<a href='/account/logintypes'><strong>Please click to Sign In.<strong><\/a>"}</p>`)

	}); $("#mobile-menu-btn").click(function () {
		toggleMobileNavMenu(!0)

	}); window.innerWidth < 1024 && $(".nav-item.dropdown").click(function () {
		var n = $(this); n.hasClass("_on") ? n.removeClass("_on") : n.addClass("_on")

	}); $(".sidebar-wrapper").click(function () {
		closeAllSidebars()

	}); $("main").on("keyup", "#aboutyou", function (n) {
		var t = $(n.currentTarget), i = parseInt(t.attr("maxlength")), r = t.val().length, u = i - r; $(".int-about i").html(`${r}/${i}`)

	}); $("main").on("click", ".reply-comments .show_replies", function () {
		var n = $(this).closest(".reply-comments"); n.hasClass("expanded") ? (n.removeClass("expanded"), n.closest("li").get(0).scrollIntoView({
			behavior: "smooth"

		}), $(this).html("Show More Replies")) : (n.addClass("expanded"), n.get(0).scrollIntoView({
			behavior: "smooth"
		}), $(this).html("Close Replies"))

	}); $("main").on("click", ".modal-section ._close", function () {
		$(".lnw-modal").remove(); unlockWindow()

	}); $("main").on("click", ".lnw-modal-soft .modal-section ._close_soft", function () {
		$(".lnw-modal-soft").removeClass("_show"); unlockWindow()

	}); $("main").on("click", ".review-modal ._close", function () {
		$(".review-modal").remove(); $("#write-review, .edit-review").removeClass("isDisabled"); unlockWindow()

	}); $("#lmreviews").on("click", function (n) {
		n.preventDefault(); var t = $(this), i = t.data("bid"), r = parseInt(t.data("pageno")); t.html('<div class="loading-dual-ring small blue"><\/div>'); t.addClass("isDisabled"); $.get("/novel/lomrev", {
			bookId: i, currentPageNo: r
		}

			, function (n) {
				n.success ? (t.data("pageno", n.pageNo), $("#review_load").append(n.resultview), n.showMore ? (t.removeClass("isDisabled"), t.html("Load More Reviews")) : t.html("No More Reviews")) : t.html("No More Review")
			})

	}); if (window.innerWidth > 767) $(".review-list").on("click", ".review-item .view-detail", function (n) {
		n.preventDefault(); var t = $(this).data("nslug"), i = $(this).data("revid"); $.get("/novel/getrevdtl", {
			reviewId: i, novelstr: t
		}

			, function (n) {
				lockWindow(); $(".review-panel").append(`<div class="review-modal _show" >${n}</div>`)
			})

	}); if ($("#novel")[0]) {
		$("#chorder").click(function () {
			var n = $(this).data("order"), t = sort_chapters(n); $.when(t).done(function () {
				var n = $("#chorder"), t = n.data("order"); t == "desc" ? (n.removeClass("fa-sort-amount-down-alt").addClass("fa-sort-amount-up"), n.data("order", "asc")) : (n.removeClass("fa-sort-amount-up").addClass("fa-sort-amount-down-alt"), n.data("order", "desc"))
			})

		}); window.innerWidth >= 1654 && $(".ad-container .ad-sticky")[0] && stickyBar(".ad-container .ad-sticky", ".ad-container", 10, !1); window.innerWidth >= 1654 && $(".ad-container.left .ad-sticky")[0] && stickyBar(".ad-container-left .ad-sticky", ".ad-container.left", 10, !1); $(".expand-wrapper .expand-btn").on("click", function () {
			$(this).closest(".expand-wrapper").addClass("show")
		})
	}

	if ($("#chapter-article")[0]) {
		function n() {
			$(".page-in .titles").isInViewport() ? $(".mobile-title-bar").is(":visible") && $(".mobile-title-bar").slideToggle("fast") : $(".mobile-title-bar").slideToggle("fast"); var n = $("#pw-oop-bottom_rail, #IL_INSEARCH, #fs-sticky-footer, #fs-slot-footer-wrapper"); typeof n != "undefined" && n.length > 0 ? $(".control-action").addClass("btspace") : $(".control-action").removeClass("btspace"); $(".control-action").slideToggle("fast", function () { })
		}

		if ($(".sidebar ._close").click(function () { }), $(".sidebar-wrapper").click(function () {
			$(".control-action").is(":visible") && n()

		}), window.innerWidth < 768) {
			$(".fs-close-button").on("click", function () {
				$(".control-action").css({
					bottom: 0
				})

			}); $(".chapter-content").click(function (t) {
				t.target.id == "btnloadfullchapter" || (t.preventDefault(), $(".control-action").is(":visible") ? (toggleBodyWrapper(!1), unlockWindow()) : (toggleBodyWrapper(!0), lockWindow()), n())
			})
		}

		$(".control-action-btn a").click(function () {
			$(".control-action").slideToggle("fast", function () { })

		}); window.innerWidth >= 768 && $(".right-panel .control-action")[0] && stickyBar(".right-panel .control-action", ".right-panel", 6, !1); window.innerWidth >= 1587 && $(".right-panel .ad-sticky")[0] && stickyBar(".right-panel .ad-sticky", ".right-panel", 6, !1); window.innerWidth >= 1587 && $(".left-panel .ad-sticky")[0] && stickyBar(".left-panel .ad-sticky", ".left-panel", 6, !1); $("#lntts-natural")[0] && stickyBar("#lntts-natural", ".page-in.content-wrap", 0, !0); document.onkeydown = function (n) {
			switch (n.keyCode) {
				case 37: $("a.chnav.prev")[0].click(); console.log("Prev Clicked"); break; case 39: $("a.chnav.next")[0].click(); console.log("Next Clicked")
			}
		}

			; $("#btnloadfullchapter").on("click", function () {
				var n = $(this); n.addClass("isDisabled"); n.html('<div class="loading-dual-ring small blue"><\/div>'); setTimeout(function () {
					$.post("/novel/loadchapter", n.data(), function (n) {
						n.success === !0 ? $("#chapter-container").html(n.content) : showAlert("Chapter Error", n.error)
					})
				}

					, 500)
			})
	}

	$("#lmcomments").on("click", function (n) {
		n.preventDefault(); var t = $(this), i = t.data("objectid"), r = t.data("objtype"), u = parseInt(t.data("pageno")); t.html('<div class="loading-dual-ring small blue"><\/div>'); t.addClass("isDisabled"); $.get("/novel/lomcom", {
			objType: r, objId: i, currentPageNo: u
		}

			, function (n) {
				n.success ? (t.data("pageno", n.pageNo), $("#comment_load").append(n.resultview), n.showMore ? (t.removeClass("isDisabled"), t.html("Load More Comments")) : t.html("No More Comments")) : t.html("No More Comments")
			})

	}); $(".view-more").click(function () {
		$(this).css("max-height", "inherit"); $(this).removeClass("expose")

	}); $(".nav-back, .bar-nav-back").click(function () {
		if ($("#chapter-article")[0]) {
			var n = window.location.pathname.substring(0, window.location.pathname.lastIndexOf("/")); window.location = n
		}

		else window.history.back()

	}); $(".alertbox .closebtn, .alertbox .apply").click(function () {
		$(".alertbox").removeClass("show"); $("html").removeAttr("style")

	}); $(document).on("click", "a.lnw-login-act", function () {
		fn_showloginform(); $(".alertbox .closebtn").trigger("click")

	}); $(".notice-bar .close i").on("click", function () {
		$(".notice-bar").remove()

	}); $(document).on("click", ".lnw-mod-wrap ._close", function () {
		$(".lnw-mod-wrap").removeClass("_show"); setTimeout(function () {
			$(".lnw-mod-wrap").remove()
		}

			, 100)

	}); $("#comment-policy-show").on("click", function () {
		$.get("/account/comterm", null, function (n) {
			n.success && (lockWindow(), $("main").append(n.content), $("main #lnwcomtermpanel").addClass("_show"))
		})

	}); $(document).on("click", ".spoiler-area .warn", function () {
		var t = $(this).closest(".review-text"), i = $(this).find("i"), n = $(this).closest(".spoiler-area"); n.hasClass("show") ? n.removeClass("show") : n.addClass("show")
	})
});